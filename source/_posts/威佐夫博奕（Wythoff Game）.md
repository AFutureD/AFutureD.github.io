---
title: 51nod 威佐夫博奕（Wythoff Game）
date: 2016-12-28 16:31:57
tags: 
    - 博弈
    - 威佐夫博奕（Wythoff Game）
categories: Algorithm
---

### 描述：

​	有2堆石子。A，B两个人轮流拿，A先拿。每次可以从一堆中取任意个或从2堆中取相同数量的石子，但不可不取。拿到最后1颗石子的人获胜。假设A，B都非常聪明，拿石子的过程中不会出现失误。给出2堆石子的数量，问最后谁能赢得比赛。

#### 例如：

​	2堆石子分别为3颗和5颗。那么不论A怎样拿，B都有对应的方法拿到最后1颗。

### 题解：

我们用，，，，表示两堆物品的数量并称其为**局势**，如果甲面对(0,0)，那么甲已经输了，这种局势我们称为**奇异局势**。前几个奇异局势是：（0，0）、（1，2）、（3，5）、（4，7）、（6，10）、（8，13）、（9，15）、（11，18）、（12，20）。

可以看出，`$a_0=b_0=0$ 、 $ a_k$是未在前面出现过的最小自然数,而 $b_k= a_k + k$`，奇异局势有如下三条性质:

> 1.任何自然数都包含在一个且仅有一个奇异局势中。

由于是未在前面出现过的最小自然数，所以有，而  。所以性质1成立。

> 2.任意操作都可将奇异局势变为非奇异局势。

事实上，若只改变奇异局势（，）的某一个分量，那么另一个分量不可能在其他奇异局势中，所以必然是非奇异局势。如果使（，）的两个分量同时减少，则由于其差不变，且不可能是其他奇异局势的差，因此也是非奇异局势。

> 3.采用适当的方法，可以将非奇异局势变为奇异局势。

假设面对的局势是（），若，则同时从两堆中取走 a 个物体，就变为了奇异局势（0，0）；如果，，那么，取走个物体，即变为奇异局势；如果 ， ,则同时从两堆中拿走个物体,变为奇异局势；如果，则从第一堆中拿走多余的数量即可；如果， ，分两种情况，第一种，,从第二里面拿走  即可；第二种，,从第二堆里面拿走 即可。

从如上性质可知，两个人如果都采用正确操作，那么**面对非奇异局势，先拿者必胜**；反之，则后拿者取胜。

那么任给一个局势（a，b），怎样判断它是不是奇异局势呢？我们有如下公式：

，，方括号表示取整函数奇妙的是其中出现了黄金分割数,因此发现对于任意的局势(a,b)，a<b, 根据上述公式，其中k明显为a与b的差值，也正是根据这个差值来确认（a，b）是否为奇异局势。具体过程为，如果则为奇异局势。

### 代码：

```c++
include <stdio.h>
include <math.h>
include <iostream>
using namespace std;
int main() {
    int t, a, b, m;
    cin >> t;
    while (t--) {
        cin >> a >> b;
        if (a > b)
            swap(a,b);
        m = (int)((b-a) * (1 + sqrt(5)) / 2.0);
        printf("%s\n", a == m ? "B" : "A");
    }
    return 0;
}
```

